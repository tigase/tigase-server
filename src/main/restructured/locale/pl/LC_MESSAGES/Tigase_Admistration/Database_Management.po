# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2004-2022, Tigase, Inc
# This file is distributed under the same license as the TigaseDoc package.
# FIRST AUTHOR <EMAIL@ADDRESS>, 2022.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: TigaseDoc \n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2022-05-05 11:44-0700\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=utf-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Generated-By: Babel 2.9.1\n"

#: ../../Tigase_Admistration/Database_Management.rst:2
msgid "Database Management"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:4
msgid ""
"Tigase is coded to perform with multiple database types and numbers. "
"Owing to it’s versatile nature, there are some tools and procedures that "
"may be of use to certain administrators."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:7
msgid "Recommended database versions"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:9
msgid ""
"As of v8.0.0 here are the minimum and recommended versions of databases "
"for use with Tigase:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:12
msgid "Database"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:12
msgid "Recommended Version"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:12
msgid "Minimum Version"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:12
msgid "Additional Information"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:14
msgid "DerbyDB"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:14
msgid "10.12.1.1"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:14
msgid "Included with Tigase XMPP Server"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:16
msgid "MySQL"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:16
msgid "5.7"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:16
msgid "5.6.4"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:16
msgid "Required to properly support timestamp storage with millisecond precision"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:18
msgid "SQLServer"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:18
msgid "2014"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:18
msgid "2012"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:18
msgid "2012 needed so we can count use fetch-offset pagination feature."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:20
msgid "PostgreSQL"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:20
msgid "13.0"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:20
msgid "9.4"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:20
msgid ""
"New UA schema requires at least 9.4; if using version older than 13 "
"manual installation of ``uuid-ossp`` extension is required (1)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:22
msgid "MongoDB"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:22
msgid "3.2"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:22
msgid "3.0"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:24
msgid "MariaDB"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:24
msgid "?"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:24
msgid "10.0.12"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:24
msgid ""
"Basic features works with 10.0.12-MariaDB Homebrew, but is not fully "
"tested."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:29
msgid ""
"For PostgreSQL version older than 13.0 manual installation of ``uuid-"
"ossp`` by the superuser to the *created database* is required:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:35
msgid ""
"Although Tigase may support other versions of databases, these are the "
"ones we are most familiar with in offering support and advice. Use of "
"databases outside these guidelines may result in unforeseen errors."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:38
msgid "Database Watchdog"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:40
msgid ""
"It is possible to have Tigase test availability and existence of database"
" periodically only when db connections are idle. By default this ping is "
"sent once every 60 minutes to each connected repository. However this can"
" be overridden as a part of the dataSource property:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:54
msgid "This setting changes frequency to 30 minutes."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:65
msgid "This one changes to 15 minutes."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:69
msgid ""
"see `Period / Duration values <#Period-Duration-values>`__ for format "
"details"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:72
msgid "Using modified database schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:74
msgid ""
"If you are using Tigase XMPP Server with modified schema (changed "
"procedures or tables) and you do not want Tigase XMPP Server to maintain "
"it and automatically upgrade, you can disable ``schema-management`` for "
"any data source. If ``schema-management`` is disable for particular data "
"source then Tigase XMPP Server will not update or modify database schema "
"in any way. Moreover it will not check if schema version is correct or "
"not."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:76
msgid "**Disabling ``schema-management`` for ``default`` data source**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:89
msgid ""
"If ``schema-management`` is disabled, then it is administrator "
"responsibility to maintain database schema and update it if needed (ie. "
"if Tigase XMPP Server schema was changed)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:92
msgid "Schema files maintenance"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:94
msgid ""
"This document describes schema files layout and assumptions about it. In "
"addition it describes how and when it should be updated."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:97
msgid "Assumptions"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:99
msgid "Following assumptions are in place:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:101
msgid ""
"All schema files are *loadable* multiple times - this is by far most "
"important assumptions and it’s allow to get away without explicit and "
"detailed checking of loaded version (it’s already handled on the schema "
"level as of version 8.0.0)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:103
msgid ""
"Required schema version is calculated from the component version (which "
"is set in the project configuration file - usually ``pom.xml``, but it’s "
"possible to override it in code via annotations - please see Developer "
"Guild in Server documentation for details)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:105
msgid ""
"we will maintain *\"3 versions schema files\"*, i.e. in the distribution "
"package we will provide schema versions for the ``current_version`` and "
"two major versions behind (and all maintenance version schema files) - "
"this will allow *quick upgrade* even from rather older versions"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:107
msgid ""
"``SNAPSHOT`` versions will print a log entry indicating that there may "
"have been changes in schema and it’s recommended to run the upgrade (we "
"are aiming at frequent releases thus mandatory schema version check will "
"be done only with final version)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:110
msgid "Checks"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:112
msgid "We will check:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:114
msgid ""
"if it’s possible to upgrade the schema (based on the current schema "
"version in the database and available SQL files and their respective "
"versions - if );"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:116
msgid ""
"if it’s required to upgrade the schema during server startup (until 7.1.x"
" [inclusive] it was done only for tigase-server, will be done by all "
"components)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:118
msgid ""
"if it’s required to upgrade the schema during run of ``upgrade-schema``) "
"(if schema is already in the latest required version, executing all SQL "
"files is not required hence speeding up upgrade)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:120
msgid ""
"During startup of ``SNAPSHOT`` version, even if the schema version match,"
" a prompt to re-run ``upgrade-schema`` will be printed in the ``logs"
"/tigase-console.log``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:123
msgid "Schema files layout"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:126
msgid "Filename layout"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:128
msgid "Basic schema filename layout consists of 3 basic parts:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:130
msgid ""
"name of relational database management system (RDBMS) for which it’s "
"intended (e.g. ``derby``, ``mysql``, ``postgresql``, ``sqlserver``);"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:132
msgid "name of the Tigase component for which it’s intended;"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:134
msgid "version of the schema file."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:136
msgid ""
"For each component and version it’s possible (but not mandatory) to split"
" all database related functionality into multiple files but it’s "
"essential that they would be linked/included in the base file for "
"particular database/component/version file. This allows separating Stored"
" Procedures (``-sp``), base schema (``-schema``) and setting properties "
"(``-props``). In principle the filename pattern looks as follows"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:142
msgid ""
"For example schema file for version 7.0.0 of Tigase Server for Derby "
"looks as follow:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:150
msgid "Files structure"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:152
msgid ""
"As mentioned before, we should support all versions matching ``old-"
"stable``, ``stable`` and ``master``, which translates to two main "
"versions behind *current-version*, that is version: *current-version - "
"2*). This results in having 3 versions of the schema in the repository at"
" any given time (two of them being \\``upgrades'' to the oldest, base "
"schema):"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:154
msgid "``current-version`` *minus* 2: base schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:156
msgid ""
"``current-version`` *minus* 1: all changes from ``current-version`` "
"*minus* 2 to ``current-version`` *minus* 1"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:158
msgid ""
"``current-version``: all changes from ``current-version`` *minus* 1 to "
"``current-version``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:162
msgid ""
"``current-version`` *MUST* always match version of the component (defined"
" in pom.xml)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:166
msgid ""
"It’s possible to have multiple files within version (related to smaller, "
"maintenance upgrade) as the SchemaLoader would collect all files which "
"version falls within range and ."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:168
msgid ""
"For example with the release of version 8.0.0 this will translate to "
"following versions:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:170
msgid "``7.0.0``: base schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:172
msgid "``7.1.0``: all changes from ``7.0.0`` to ``7.1.0``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:174
msgid "``8.0.0``: all changes from ``7.1.0`` to ``8.0.0``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:178
msgid "All schema files must be stored under ``src/main/database/``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:181
msgid "Handling of changes in the schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:183
msgid "There are two main workflows defined"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:186
msgid "During release of the version"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:188
msgid ""
"As we keep at the most only 3 versions of the schema, after release of "
"the version we need to adjust (flatten) the files to maintain structure "
"defined in *Files structure* (it may happen, that there wouldn’t be any "
"changes in the schema for particular version which will result in "
"relatively empty ``current-version`` schema file – only setting current "
"version for component with ``setVersion('component','<current-version"
"></current-version>');`` )."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:190
msgid ""
"For example we are about to release version ``8.0.0``. This results in "
"the following versions of the schema (in the example for the server) in "
"the repository:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:192
msgid "``<database>-server-schema-7.0.0.sql``: base schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:194
msgid "``<database>-server-schema-7.1.0.sql``: including changes for ``7.1.0``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:196
#: ../../Tigase_Admistration/Database_Management.rst:206
msgid "``<database>-server-schema-8.0.0.sql``: including changes for ``8.0.0``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:200
msgid ""
"It’s possible that there will be maintenance versions in the list as "
"well, e.g.: ``<database>-server-schema-7.1.1.sql`` and ``<database"
">-server-schema-7.1.2.sql``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:202
msgid ""
"After the release we specify the version of the next release in pom.xml "
"(for example ``8.1.0`` and the same version will be the ``current-"
"version`` making the oldest available version ``7.1.0``. Because of that "
"we *MUST* incorporate all the changes in ``7.1.0`` onto ``7.0.0`` "
"creating new base file with version ``7.1.0``, i.e.:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:204
msgid "``<database>-server-schema-7.1.0.sql``: base schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:208
msgid "``<database>-server-schema-8.1.0.sql``: including changes for ``8.1.0``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:211
msgid "Maintenance releases"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:213
msgid ""
"Following cases will be discussed with solid-version examples. Comments "
"will be provided in-line Following assumptions are made:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:215
msgid "Version succession: ``5.1.0``, ``5.2.0``, ``7.0.0``, ``7.1.0``, ``8.0.0``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:217
msgid ""
"Versions mapping: ``master`` (``8.0.0``), ``stable`` (``7.1.0``), ``old-"
"stable`` (``7.0.0``):"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:219
#: ../../Tigase_Admistration/Database_Management.rst:255
#: ../../Tigase_Admistration/Database_Management.rst:291
msgid "schema files in ``old-stable`` branch"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:221
#: ../../Tigase_Admistration/Database_Management.rst:257
#: ../../Tigase_Admistration/Database_Management.rst:293
msgid "5.1.0 (base)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:223
#: ../../Tigase_Admistration/Database_Management.rst:259
#: ../../Tigase_Admistration/Database_Management.rst:295
msgid "5.2.0 (upgrade)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:225
#: ../../Tigase_Admistration/Database_Management.rst:231
#: ../../Tigase_Admistration/Database_Management.rst:261
#: ../../Tigase_Admistration/Database_Management.rst:269
#: ../../Tigase_Admistration/Database_Management.rst:297
#: ../../Tigase_Admistration/Database_Management.rst:303
msgid "7.0.0 (upgrade)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:227
#: ../../Tigase_Admistration/Database_Management.rst:265
#: ../../Tigase_Admistration/Database_Management.rst:299
msgid "schema files in ``stable`` branch"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:229
#: ../../Tigase_Admistration/Database_Management.rst:267
#: ../../Tigase_Admistration/Database_Management.rst:301
msgid "5.2.0 (base)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:233
#: ../../Tigase_Admistration/Database_Management.rst:239
#: ../../Tigase_Admistration/Database_Management.rst:273
#: ../../Tigase_Admistration/Database_Management.rst:281
#: ../../Tigase_Admistration/Database_Management.rst:305
#: ../../Tigase_Admistration/Database_Management.rst:311
msgid "7.1.0 (upgrade)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:235
#: ../../Tigase_Admistration/Database_Management.rst:275
#: ../../Tigase_Admistration/Database_Management.rst:307
msgid "schema files in ``master`` branch"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:237
#: ../../Tigase_Admistration/Database_Management.rst:277
#: ../../Tigase_Admistration/Database_Management.rst:309
msgid "7.0.0 (base)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:241
#: ../../Tigase_Admistration/Database_Management.rst:283
msgid "8.0.0 (upgrade)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:245
msgid "Making a change in ``old-stable`` (and ``stable``)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:247
msgid ""
"If we made a schema change in ``old-stable`` version (and it’s branch) we"
" must:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:249
msgid "create a new file with upgraded version number;"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:251
msgid "propagate the change to the ``stable`` and ``master`` branch."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:253
msgid "Repository changes:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:263
msgid ""
"7.0.1 (upgrade) **←** making a *change* here results in the schema "
"version being bumped to 7.0.1"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:271
#: ../../Tigase_Admistration/Database_Management.rst:279
msgid "7.0.1 (upgrade) **←** we must port the *change* here"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:287
msgid "Making a change in ``master``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:289
msgid ""
"If we made a schema change in ``master`` version we don’t propagate the "
"change to the ``stable`` and ``old-stable`` branch."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:313
msgid ""
"8.0.0 (upgrade) **←** we make the *change* here, as this is the "
"development version schema version remains the same."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:317
msgid "Implementation details"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:320
msgid "In-file control"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:322
msgid "There are two main control instructions (intended for ``SchemaLoader``):"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:324
msgid ""
"denoting Queries with ``-- QUERY START:`` and ``-- QUERY END:`` - each "
"must be placed in own, separate file with the query being enclosed by the"
" two of them, for example:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:332
msgid ""
"sourcing other file with ``-- LOAD FILE: <path to .sql file>`` - path "
"must be on the same line, following control instruction, for example:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:339
msgid "Storing version in the database"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:341
msgid ""
"Each repository will have a table ``tig_schema_versions`` with the "
"information about all installed components and it’s versions in that "
"particular repository. There will be an associated stored procedure to "
"obtain and set version:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:343
msgid "table:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:354
msgid "stored procedures ``get/setVersion(‘component’,'version');``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:356
msgid ""
"It will be stored and maintained in the file named ``<RDBMS_name>-common-"
"schema-<version>.sql``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:359
msgid "Database Preparation"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:361
msgid ""
"Tigase uses generally the same database schema and the same set of stored"
" procedures and functions on every database. However, the schema creation"
" scripts and code for stored procedures is different for each database. "
"Therefore the manual process to prepare database is different for each "
"database system."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:363
msgid ""
"Starting with v8.0.0, most of the database tasks have been automated and "
"can be called using simple text, or using interactive question and answer"
" style. We **DO NOT RECOMMEND** going through manual operation, however "
"we have kept manual activation of different databases to the Appendix. If"
" you are interested in how we manage and update our database schemas, you"
" may visit the ` Schema files maintenance <#Schema-files-maintenance>`__ "
"section of our Redmine installation for more detailed information."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:365
msgid "`The DBSchemaLoader Utility <#Schema-Utility>`__"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:367
msgid "`Hashed User Passwords in Database <#Hashed-User-Passwords-in-Database>`__"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:369
msgid "`Support for MongoDB <#Preparing-Tigase-for-MongoDB>`__"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:371
msgid "Appendix entries"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:373
msgid ""
"`Manual installtion for MySQL <#Prepare-the-MySQL-Database-for-the-"
"Tigase-Server>`__"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:375
msgid ""
"`Manual installtion for Derby <#Prepare-the-Derby-Database-for-the-"
"Tigase-Server>`__"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:377
msgid ""
"`Manual installtion for SQLServer <#Prepare-the-MS-SQL-Server-Database-"
"for-the-Tigase-Server>`__"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:379
msgid ""
"`Manual installtion for PostGRESQL <#Prepare-the-PostgreSQL-Database-for-"
"the-Tigase-Server>`__"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:382
msgid "Schema Utility"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:384
msgid ""
"With the release of v8.0.0 calling the Tigase dbSchemaLoader utility now "
"can be done using tasks instead of calling the specific method. Support "
"for Derby, MySQL, PostgreSQL, MSSQL, and MongoDB is available."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:386
msgid ""
"In order to use this utility with any of the databases, you will need to "
"first have the database environment up and running, and have established "
"user credentials. You may use root or an account with administrator write"
" privileges."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:389
msgid "Operation & Variables"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:391
msgid "Operation"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:393
msgid ""
"Operating the schema utility is quite easy! To use it run this command "
"from the installation directory:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:399
msgid ""
"Operations are now converted to tasks, of which there are now three: "
"``install-schema``, ``upgrade-schema``, and ``destroy-schema``."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:401
msgid ""
"``upgrade-schema``: Upgrade the schema of the database specified in your "
"``config.tdsl`` configuration file. (options are ignored for this option)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:403
msgid "``install-schema``: Install a schema to database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:405
msgid "``destroy-schema``: Destroy database and schemas. **DANGEROUS**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:407
#: ../../Tigase_Admistration/Database_Management.rst:459
msgid "Options"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:409
msgid ""
"Use the following options to customize. Options in bold are required, "
"*{potential options are in brackets}*:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:411
msgid "``--help`` Prints the help for the task."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:413
msgid ""
"``-I`` or ``--interactive`` - enables interactive mode which will prompt "
"for parameters not defined."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:415
msgid ""
"``-T`` or ``--dbType`` - database type {derby, mongodb, mysql, "
"postgresql, sqlserver}."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:417
msgid ""
"``-C`` or ``--components`` - Allows the specification of components for "
"use when installing a schema."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:420
msgid "Usage"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:422
msgid "upgrade-schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:424
msgid ""
"This task will locate any schema versions above your current one, and "
"will install them to the database configured in the ``config.tdsl`` file."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:428
msgid ""
"To use this utility, you must have Tigase XMPP server fully setup with a "
"configured configuration file."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:434
msgid "Windows users will need to run the command using the following command:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:440
msgid "install-schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:442
msgid "This task will install a schema using the parameters provided."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:444
msgid ""
"**If you are setting up a server manually, we HIGHLY recommend using this"
" method**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:450
msgid ""
"This command will install tigase using a Derby database on one named "
"``tigasedb`` hosted on ``localhost``. The username and password editing "
"the database is ``tigase_pass`` and ``root``. Note that ``-J`` explicitly"
" adds the administrator, this is highly recommended with the ``-N`` "
"passing the password."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:452
msgid "If you are using a windows system, you need to call the program directly:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:461
msgid ""
"Options for schema installation are as follows, required options are in "
"bold"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:463
msgid "``--help``, Outputs the help."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:465
msgid ""
"``-I``, ``--interactive`` - enables interactive mode, which will result "
"in prompting for any missing parameters."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:467
msgid ""
"``-C``, ``--components=`` - list of enabled components identifiers (+/-),"
" possible values: [``amp``, ``bosh``, ``c2s``, ``eventbus``, ``ext-"
"disco``, ``http``, ``mdns``, ``message-archive``, ``monitor``, ``muc``, "
"``pubsub``, ``push``, ``s2s``, ``socks5``, ``test``, ``unified-archive``,"
" ``upload``, ``ws2s``] (default: amp,bosh,c2s,eventbus,http,message-"
"archive,monitor,muc,pubsub,s2s,ws2s). **This is required for certain "
"components like socks5.**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:469
msgid ""
"``-T``, ``--dbType=`` - database server type, possible values are: "
"[``derby``, ``mongodb``, ``mysql``, ``postgresql``, ``sqlserver``] "
"(*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:471
msgid ""
"``-D``, ``--dbName=`` - name of the database that will be created (by "
"default it is ``tigasedb``). (*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:473
msgid ""
"``-H``, ``--dbHostname=`` - address of the database instance (by default "
"it is ``localhost``). (*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:475
msgid ""
"``-U``, ``--dbUser=`` - name of the user that will be created "
"specifically to access Tigase XMPP Server database (default is "
"``tigase_user``). (*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:477
msgid ""
"``-P``, ``--dbPass=`` - password of the user that will be created "
"specifically to access Tigase XMPP Server database (default is "
"``tigase_pass``). (*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:479
msgid ""
"``-R``, ``--rootUser=`` - database root account username used to create "
"user and database (default is ``root``). (*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:481
msgid ""
"``-A``, ``--rootPass=`` - database root account password used to create "
"user and database (default is ``root``). (*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:483
msgid ""
"``-S``, ``--useSSL`` - enable SSL support for database connection (if the"
" database supports it) (default is false)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:485
msgid ""
"``-F``, ``--file=`` - comma separated list of SQL files that will be "
"processed."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:487
msgid ""
"``-Q``, ``--query=`` - custom queries to be executed, see `Query function"
" <#queryschema>`__ for details."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:489
msgid ""
"``-L``, ``--logLevel=`` - logger level used during loading process "
"(default is ``CONFIG``)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:491
msgid "``-J``, ``--adminJID=`` - comma separated list of administrator JID(s)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:493
msgid ""
"``-N``, ``--adminJIDpass=`` - password that will be used for the entered "
"JID(s) - one password for all configured JIDs."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:495
msgid "``--getURI=`` - generate database URI (default is ``false``)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:497
msgid ""
"``--ignoreMissingFiles=`` - force ignoring missing files errors (default "
"is ``false``)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:499
msgid "Query function"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:501
msgid ""
"Should you decide to customize your own functions, or have specific "
"information you want to put into the database, you can use the -query "
"function to perform a single query step."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:507
msgid ""
"Of course this would break the schema for tigasedb by adding an "
"unexpected table, you will receive the following message:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:513
msgid ""
"But this is a demonstration how you may run a query through the database "
"without the need to use another tool. Note that you will need to select "
"the specific database for each query."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:515
msgid "destroy-schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:518
msgid "This will destroy the database specified in the configuration file."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:522
msgid "**THIS ACTION IS NOT REVERSIBLE**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:528
msgid ""
"Only use this if you wish to destroy a database and not have the "
"information recoverable."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:530
msgid "Windows users will need to call the method directly:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:537
msgid "A note about MySQL"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:539
msgid "If you are using these commands, you may result in the following error:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:545
msgid ""
"If this occurs, you will need to upgrade your version of MySQL using the "
"following command:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:551
msgid ""
"After entering the password and upgrading MySQL the schema error should "
"no longer show when working with Tigase databases."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:554
msgid "Prepare the MySQL Database for the Tigase Server"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:556
msgid ""
"This guide describes how to prepare MySQL database for connecting Tigase "
"server."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:558
msgid ""
"The MySQL database can be prepared in many ways. Most Linux distributions"
" contain tools which allow you to go through all steps from the shell "
"command line. To make sure it works on all platforms in the same way, we "
"will first show how to do it under MySQL command line client."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:561
msgid "Configuring from MySQL command line tool"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:563
msgid ""
"Run the MySQL command line client in either Linux or MS Windows "
"environment and enter following instructions from the Tigase installation"
" directory:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:569
msgid "Once logged in, create the database for the Tigase server:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:575
msgid ""
"Add the ``tigase_user`` user and grant him access to the ``tigasedb`` "
"database. Depending on how you plan to connect to the database (locally "
"or over the network) use one of following commands or all if you are not "
"sure:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:577
#: ../../Tigase_Admistration/Database_Management.rst:684
msgid "Grant access to tigase_user connecting from any network address."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:584
#: ../../Tigase_Admistration/Database_Management.rst:693
msgid "Grant access to tigase_user connecting from localhost."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:591
#: ../../Tigase_Admistration/Database_Management.rst:702
msgid "Grant access to tigase_user connecting from local machine only."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:598
msgid "And now you can update user permission changes in the database:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:606
msgid ""
"It’s essential to enable `log_bin_trust_function_creators "
"<https://dev.mysql.com/doc/refman/8.0/en/replication-options-binary-"
"log.html#sysvar_log_bin_trust_function_creators>`__ option in MySQL "
"server, for example by running:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:612
msgid "Installing Schemas"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:614
msgid ""
"Starting with v8.0.0 the Schemas are no longer linked, and will need to "
"manually be installed in the following order."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:616
msgid "Switch to the database you have created:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:624
msgid ""
"We are assuming you run the mysql client in Linux from the Tigase "
"installation directory, so all file links will be relative."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:626
msgid "Next install the schema files:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:632
#: ../../Tigase_Admistration/Database_Management.rst:721
msgid "You will need to repeat this process for the following files:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:647
#: ../../Tigase_Admistration/Database_Management.rst:736
#: ../../Tigase_Admistration/Database_Management.rst:928
#: ../../Tigase_Admistration/Database_Management.rst:1019
#: ../../Tigase_Admistration/Database_Management.rst:1183
#: ../../Tigase_Admistration/Database_Management.rst:1236
msgid "Other components may require installation such as:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:657
msgid "Windows instructions:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:659
msgid ""
"On Windows you have probably to enter the full path, assuming Tigase is "
"installed in C:\\Program Files\\Tigase:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:670
#: ../../Tigase_Admistration/Database_Management.rst:1193
msgid "Configuring From the Linux Shell Command Line"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:672
msgid "Follow steps below to prepare the MySQL database:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:674
msgid "Create the database space for the Tigase server:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:680
msgid ""
"Add the ``tigase_user`` user and grant access to the tigasedb database. "
"Depending on how you plan to connect to the database (locally or over the"
" network) use one of following commands or all if you are not sure:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:682
msgid "Selective access configuration"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:711
#: ../../Tigase_Admistration/Database_Management.rst:1154
msgid "Schema Installation"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:713
msgid "Load the proper mysql schemas into the database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:747
msgid "Configuring MySQL for UTF-8 Support"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:749
msgid "In my.conf put following lines:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:766
msgid "Then connect to the database from the command line shell check settings:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:773
msgid ""
"If any of these shows something else then 'utf8' then you need to fix it "
"using the command:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:779
msgid ""
"You can now also test your database installation if it accepts UTF-8 "
"data. The easiest way to ensure this is to just to create an account with"
" UTF-8 characters:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:785
msgid "And then check that the account has been created:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:791
msgid ""
"If the last command gives you no results it means there is still "
"something wrong with your settings. You might also want to check your "
"shell settings to make sure your command line shell supports UTF-8 "
"characters and passes them correctly to MySQL:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:799
msgid ""
"It seems that MySQL 5.0.x also needs extra parameters in the connection "
"string: '&useUnicode=true&characterEncoding=UTF-8' while MySQL 5.1.x "
"seems to not need it but it doesn’t hurt to have it for both versions. "
"You have to edit ``etc/config.tdsl`` file and append this to the database"
" connection string."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:801
msgid ""
"For MySQL 5.1.x, however, you need to also update code for all database "
"stored procedures and functions used by the Tigase. They are updated for "
"Tigase version 4.4.x and up, however if you use an older version of the "
"Tigase server, you can reload stored procedures using the file from SVN."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:804
msgid "Other MySQL Settings Worth Considering"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:806
msgid ""
"There are a number of other useful options, especially for performance "
"improvements. Please note, you will have to review them as some of them "
"may impact data reliability and are useful for performance or load tests "
"installations only."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:814
msgid "Some the general MySQL settings which mainly affect performance:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:829
msgid "InnoDB specific settings:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:852
msgid ""
"These settings may not be fully optimized for your system, and have been "
"only tested on our systems. If you have found better settings for your "
"systems, feel free to `let us know <http://tigase.net/contact>`__."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:855
msgid "Support for emoji and other icons"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:857
msgid ""
"Tigase Database Schema can support emojis and other icons, however by "
"using UTF-8 in ``mysqld`` settings will not allow this. To employ "
"settings to support emojis and other icons, we recommend you use the "
"following in your MySQL configuration file:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:866
msgid ""
"Doing this, Tigase XMPP Server Database will still use ``utf8`` character"
" set, with ``utf8_general_ci`` as collation, and only fields which "
"require support for emojis will be converted to ``utf8mb4``."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:870
msgid ""
"If for some reason, with above settings applied to your MySQL instance, "
"you still receive :literal:`java.sql.SQLException: Incorrect string "
"value: ` you should add to your database URI passed in Tigase XMPP Server"
" following configuration `&useUnicode=true&characterEncoding=UTF-8`. If "
"even this fails too, then you may try adding "
"``&connectionCollation=utf8mb4_bin`` as a last resort. This changes "
"situation from previous versions that shipped older MySQL JDBC connector."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:874
msgid ""
"Tigase XMPP Server databases should be created with ``utf8_general_ci`` "
"collation as it will work properly and is fastest from "
"``utf8mb4_general_ci`` collations supported by MySQL"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:877
msgid "Prepare the Derby Database for the Tigase Server"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:879
msgid ""
"This guide describes how to prepare Derby database for connecting the "
"Tigase server."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:882
msgid "Basic Setup"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:883
msgid ""
"Preparation of Derby database is quite simple, but the following "
"assumptions are made"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:885
msgid "``DerbyDB`` - Derby database name"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:887
msgid "``database/`` directory contains all necessary schema files"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:889
msgid "``jars/`` and ``libs/`` directories contains Tigase and Derby binaries"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:891
msgid "General Approach"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:893
msgid ""
"From the main Tigase directory execute following commands (Linux and "
"Windows accordingly)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:897
msgid "You must use these sql files on order FIRST!"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:899
msgid "**Linux**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:905
msgid "**Windows**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:911
msgid ""
"This will create Derby database named DerbyDB in the main Tigase "
"directory and load common version for common v0.1."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:913
msgid "You will need to repeat this process again in for following order:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:937
msgid "Connecting Tigase to database"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:939
msgid ""
"Once the database is setup, configure the ``config.tdsl`` file in Tigase "
"and add the following configuration:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:950
msgid "Prepare the MS SQL Server Database for the Tigase Server"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:952
msgid ""
"This guide describes how to prepare the MS SQL Server database for "
"connecting the Tigase server to it."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:954
msgid ""
"It’s expected that a working installation of Microsoft SQL Server is "
"present. The following guide will describe the necessary configurations "
"required for using MS SQL Server with Tigase XMPP Server."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:957
msgid "Preparing MS SQL Server Instance"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:959
msgid ""
"After installation of MS SQL Server an instance needs to be configure to "
"handle incoming JDBC connections. For that purpose it’s required to open "
"*SQL Server Configuration Manager*. In the left-hand side panel navigate "
"to *SQL Server Configuration Manager*, then *SQL Server Network "
"Configuration → Protocols for ${INSTANCE_NAME}*. After selecting instance"
" in the right-hand side panel select TCP/IP and open *Properties*, in the"
" Protocol tab in General section select Yes for Enabled property. In the "
"IP Addresses tab select Yes for Active and Enabled properties of all IP "
"Addresses that you want MS SQL Server to handle. Subsequently set the TCP"
" Port property (if missing) to the default value - 1433. A restart of the"
" instance may be required afterwards."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:962
msgid "Configuration using MS SQL Server Management Studio"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:964
msgid ""
"In order to prepare the database you can use either a wizard or execute "
"queries directly in the Query Editor. Firstly you need to establish a "
"connection to the MS SQL Server instance. From Object Explorer select "
"Connect and in the Connect to Server dialog enter administrator "
"credentials."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:966
msgid "Using Wizards"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:968
msgid "Create Login"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:970
msgid ""
"In the left-hand side panel select Security → Logins and from context "
"menu choose New Login, in the Wizard window enter desired Login name, "
"select SQL Server authentication and enter desired password subsequently "
"confirming action with OK"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:972
msgid "Create Database"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:974
msgid ""
"From the Object Explorer select Databases node and from context menu "
"select New Database; in the Wizard window enter desired Database name and"
" enter previously created Login name into Owner field; subsequently "
"confirming action with OK."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:977
msgid "Using Queries"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:979
msgid ""
"From the Object Explorer root node’s context menu select New Query. In "
"the Query windows execute following statements adjusting details to your "
"liking:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:998
msgid "Import Schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1000
msgid ""
"From the File menu Select Open → File (or use Ctrl+O) and then open "
"following files:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1017
msgid ""
"These files must be done sequentially! They are not linked, and so may "
"need to be done one at a time."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1028
msgid ""
"Subsequently select created database from the list of Available Databases"
" (Ctrl+U) available on the toolbar and execute each of the opened files "
"in the order listed above."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1031
msgid "Configuring from command line tool"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1033
msgid ""
"Creation of the database and import of schema can be done from command "
"line as well. In order to do that, execute following commands from the "
"directory where Tigase XMPP Server is installed otherwise paths to the "
"schema need to be adjusted accordingly:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1045
msgid ""
"Above can be automatized with provided script %tigase-server%\\scripts"
"\\db-create-sqlserver.cmd (note: it needs to be executed from main Tigase"
" XMPP Server directory due to maintain correct paths):"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1051
msgid "If no parameters are provided then the following defaults are used:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1063
msgid "Tigase configuration - config.tdsl"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1065
msgid "Configuration of the MS SQL Server follows general database convention."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1075
msgid "where any number of additional parameters can (and should) consist of:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1077
msgid "``databaseName`` - name of the database"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1079
msgid "``user`` - username configured to access database"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1081
msgid "``password`` - password for the above username"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1083
msgid "``schema`` - name of the database schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1085
msgid ""
"``lastUpdateCount`` - 'false' value causes all update counts to be "
"returned, including those returned by server triggers"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1087
msgid "Example:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1098
msgid "JDBC: jTDS vs MS JDBC driver"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1100
msgid ""
"Tigase XMPP Server supports two JDBC drivers intended to be used with "
"Microsoft SQL Server - one created and provided by Microsoft itself and "
"the alternative implementation - jTDS. Tigase is shipped with the latter "
"in the distribution packages. Starting with the version 7.1.0 we "
"recommend using jDTS driver that is shipped with Tigase as JDBC driver "
"created by Microsoft can cause problems with some components in cluster "
"installations. MS driver can be downloaded form the website: `JDBC "
"Drivers 4.0, 4.1 for SQL Server <http://www.microsoft.com/en-"
"us/download/details.aspx?displaylang=en&id=11774>`__ then unpack the "
"archive. Copy sqljdbc_4.0/enu/sqljdbc4.jar file to ${tigase-server}/jars "
"directory."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1102
msgid "Depending on the driver used ``uri`` needs to be configured accordingly."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1104
msgid "Microsoft driver:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1114
msgid "jDTS driver"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1125
msgid "Prepare the PostgreSQL Database for the Tigase Server"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1127
msgid ""
"This guide describes how to prepare PostgreSQL database for connecting to"
" Tigase server."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1129
msgid ""
"The PostgreSQL database can be prepared in many ways. Below are presented"
" two possible ways. The following assumptions apply to both methods:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1131
msgid "``admin_db_user`` - database user with admin rights"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1133
msgid "``tigase_user`` - database user for Tigase"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1135
msgid "``tigasedb`` - database for Tigase"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1138
msgid "Configuring from PostgreSQL Command Line Tool"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1140
msgid "Run the PostgreSQL command line client and enter following instructions:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1142
msgid "Add the ``tigase_user``:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1148
msgid ""
"Next, Create the database for the Tigase server with ``tigase_user`` as "
"owner of database:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1156
msgid ""
"Load database schema to initialize the Tigase server from the file that "
"corresponds to the version of Tigase you want to use. First you need to "
"switch to ``tigasedb``."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1162
msgid "Begin by applying the basic Schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1168
#: ../../Tigase_Admistration/Database_Management.rst:1221
msgid "Continue by adding the schema files listed below:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1195
msgid "Follow steps below to prepare the PostgreSQL database:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1197
msgid "First, add the ``tigase_user``:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1203
msgid ""
"You will be asked for credentials for admin_db_user and password for new "
"database user."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1205
msgid ""
"Create the database for the Tigase server with tigase_user as owner of "
"database:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1211
msgid "Database Schema Installation"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1213
msgid "Load database schema to initialize the Tigase server"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1247
msgid ""
"The above commands should be executed from the main Tigase directory. The"
" initialization schema file should be also available locally in database/"
" directory of your Tigase installation."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1250
msgid "Preparing Tigase for MongoDB"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1252
msgid ""
"Tigase now supports MongoDB for auth, settings, and storage repositories."
" If you wish to use MongoDB for Tigase, please use this guide to help "
"you."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1255
msgid "Dependencies"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1257
msgid ""
"To run Tigase MongoDB support library requires drivers for MongoDB for "
"Java which can be downloaded from `here <https://github.com/mongodb"
"/mongo-java-driver/releases>`__. This driver needs to be placed in "
"``jars/`` directory located in Tigase XMPP Server installation directory."
" If you are using a dist-max distribution, it is already included."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1260
msgid "Configuration"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1262
msgid ""
"Note that fresh installations of MongoDB do not come with users or "
"databases installed. Once you have setup MongoDB you will need to create "
"a user to be used with Tigase. To do this, bring up the mongo console by "
"running mongo.exe in a cmd window for windows, or run mongo in linux. "
"Once connected, enter then following:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1274
msgid ""
"Be sure to give this user a ``root`` role in order to properly write to "
"the database. Once you receive a ``user successfully created`` message, "
"you are ready to install tigase on MongoDB."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1276
msgid "Configuration of user repository for Tigase XMPP Server"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1278
msgid ""
"To configure Tigase XMPP Server to use MongoDB you need to set "
"``dataSource`` in etc/config.tdsl file to proper MongoDB URI pointing to "
"which MongoDB database should be used (it will be created by MongoDB if "
"it does not exist). ``userRepository`` property should not be set to let "
"Tigase XMPP Server auto-detect proper implementation of "
"``UserRepository``. Tigase XMPP Server will create proper collections in "
"MongoDB if they do not exist so no schema files are necessary."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1280
msgid ""
"Example configuration of XMPP Server pointing to MongoDB database "
"``tigase_test`` in a local instance:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1296
msgid ""
"If Tigase Server is not able to detect a proper storage layer "
"implementation, it can be forced to use one provided by Tigase using the "
"following lines in ``etc/config.tdsl`` file:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1311
msgid ""
"Every component should be able to use proper implementation to support "
"MongoDB using this URI. Also MongoDB URI can be passed as any URI in "
"configuration of any component."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1313
msgid "Configuration for MUC"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1315
msgid ""
"By default, MUC component will use MongoDB to store data if Tigase is "
"configured to use it as a default store. However, if you would like to "
"use a different MongoDB database to store MUC message archive, you can do"
" this by adding the following lines to ``etc/config.tdsl`` file:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1323
msgid ""
"If MUC components fails to detect and use a proper storage layer for "
"MongoDB, you can force it to use one provided by Tigase by using the "
"following line in the ``config.tdsl`` file:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1332
msgid "Configuration for PubSub"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1334
msgid ""
"By default, PubSub component will use MongoDB to store data if Tigase is "
"configured to use it as a default store. However, if you would like to "
"use a different MongoDB database to store PubSub component data, you can "
"do this by adding the following lines to ``etc/config.tdsl`` file:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1342
msgid ""
"If the PubSub components fails to detect and use a proper storage layer "
"for MongoDB, you can force it to use one provided by Tigase by using the "
"following line in the ``config.tdsl`` file:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1351
msgid "Configuration for Message Archiving"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1353
msgid ""
"By default, the Message Archiving component will use MongoDB to store "
"data if Tigase is configured to use it as a default store. However, if "
"you would like to use a different MongoDB database to store message "
"archives, you can do this by adding the following lines to "
"``etc/config.tdsl`` file:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1361
msgid ""
"If Message Archiving component fails to detect and use a proper storage "
"layer for MongoDB, you can force it to use one provided by Tigase by "
"using the following line in the ``config.tdsl`` file:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1371
msgid "Schema Description"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1373
msgid ""
"This description contains only basic description of schema and only basic"
" part of it. More collections may be created if additional components of "
"Tigase XMPP Server are loaded and configured to use MongoDB."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1376
msgid "Tigase XMPP Server Schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1378
msgid ""
"Basic schema for UserRespository and AuthRepository consists of two "
"collections: . tig_users - contains list of users . tig_nodes - contains "
"data related to users in tree-like way"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1380
msgid "``tig_users`` collection contains the following fields:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1382
msgid "Table 9. tig_users"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1385
#: ../../Tigase_Admistration/Database_Management.rst:1401
#: ../../Tigase_Admistration/Database_Management.rst:1419
#: ../../Tigase_Admistration/Database_Management.rst:1441
msgid "Name"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1385
#: ../../Tigase_Admistration/Database_Management.rst:1401
#: ../../Tigase_Admistration/Database_Management.rst:1419
#: ../../Tigase_Admistration/Database_Management.rst:1441
msgid "Description"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1387
#: ../../Tigase_Admistration/Database_Management.rst:1403
#: ../../Tigase_Admistration/Database_Management.rst:1443
msgid "\\_id"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1387
#: ../../Tigase_Admistration/Database_Management.rst:1405
msgid "id of user which is SHA256 hash of users jid (raw byte array)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1389
msgid "user_id"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1389
msgid "contains full user jid."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1391
msgid "domain"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1391
msgid "domain to which user belongs for easier lookup of users by domain."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1393
msgid "password"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1393
msgid "password of user (will be removed after upgrade to 8.0.0)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1396
msgid "``tig_nodes`` collection contains the following fields"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1398
msgid "Table 10. tig_nodes"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1403
msgid "id of row auto-generated by MongoDB."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1405
#: ../../Tigase_Admistration/Database_Management.rst:1445
msgid "uid"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1407
msgid "node"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1407
msgid "full path of node in tree-like structure separated by / (may not exist)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1409
msgid "key"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1409
msgid "key for which value for node is set."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1411
msgid "value"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1411
msgid "value which is set for node key."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1414
msgid ""
"Tigase XMPP Server also uses additional collections for storage of "
"Offline Messages"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1416
msgid "Table 11. msg_history collection"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1421
msgid "from"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1421
msgid "full user jid of message sender."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1423
msgid "from_hash"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1423
msgid "SHA256 hash of message sender jid as raw byte array."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1425
msgid "to"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1425
msgid "full users jid of message recipient."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1427
msgid "to_hash"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1427
msgid "SHA256 hash of message recipient full jid as raw byte array."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1429
msgid "ts"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1429
msgid "timestamp of message as date."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1431
msgid "message"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1431
msgid "serialized XML stanza containing message."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1433
msgid "expire-at"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1433
msgid ""
"timestamp of expiration of message (if message contains AMP expire-at "
"set)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1436
msgid ""
"Due to changes in authentication and credentials storage in "
"AuthRepository, we moved ``password`` field from ``tig_users`` collection"
" to a newly created collection called ``tig_user_credentials``."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1438
msgid "This new collection has following fields:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1443
msgid "id of document automatically generated by MongoDB"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1445
msgid "SHA256 hash of a user for which credentails are stored"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1447
msgid "username"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1447
msgid "username provided during authentication (or ``default``)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1449
msgid "account_status"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1449
msgid ""
"name of an account state (copy of value stored in user document "
"from`tig_users`)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1452
msgid ""
"Additionally for each mechanism we store separate field in this object, "
"so for:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1454
msgid "``PLAIN`` we have ``PLAIN`` field with value for this mechanism"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1456
msgid ""
"``SCRAM-SHA-1`` we have ``SCRAM-SHA-1`` field with value for this "
"mechanism"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1458
msgid "etc…​"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1460
msgid ""
"Upgrade is not done in one step, and rather will be done once a "
"particular user will log in. During authentication if there is no data in"
" ``tig_user_credentials``, Tigase XMPP Server will check if ``password`` "
"field in ``tig_user`` exists. If it does, and it is filled credentials "
"will be migrated to the new collection."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1463
msgid "Hashed User Passwords in Database"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1467
msgid ""
"This feature is still available, but passwords are stored encrypted by "
"default since v8.0.0. We do not recommend using these settings."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1469
msgid ""
"By default, user passwords are stored in plain-text in the Tigase’s "
"database. However, there is an easy way to have them encoded in either "
"one of already supported ways or to even add a new encoding algorithm on "
"your own."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1471
msgid ""
"Storing passwords in hashed format in the database makes it possible to "
"avoid using a plain-text password authentication mechanism. You cannot "
"have hashed passwords in the database and non-plain-text password "
"authentication. On the other hand, the connection between the server and "
"the client is almost always secured by SSL/TLS so the plain-text password"
" authentication method is perhaps less of a problem than storing plain-"
"text passwords in the database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1473
msgid "Nevertheless, it is simple enough to adjust this in Tigase’s database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1476
msgid "Shortcut"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1478
msgid ""
"Connect to your database from a command line and execute following "
"statement for MySQL database:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1484
msgid "Where encoding mode is one of the following:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1486
msgid ""
"``MD5-PASSWORD`` the database stores MD5 hash code from the user’s "
"password."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1488
msgid ""
"``MD5-USERID-PASSWORD`` the database stores MD5 hash code from "
"concatenated user’s bare JID and password."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1490
msgid ""
"``MD5-USERNAME-PASSWORD`` the database stores MD5 hash code from "
"concatenated user’s name (localpart) and password."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1492
msgid "For example:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1499
msgid "Full Route"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1501
msgid ""
"The way passwords are stored in the DB is controlled by Tigase database "
"schema property. Properties in the database schema can be set by a stored"
" procedure called: ``TigPutDBProperty(key, value)``. Properties from the "
"DB schema can be retrieved using another stored function called: "
"``TigGetDBProperty(key)``."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1503
msgid ""
"The simplest way to call them is via command-line interface to the "
"database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1505
msgid ""
"For the purpose of this guide let’s say we have a MySQL database and a "
"test account: ``test@example.com`` with password ``test77``."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1507
msgid ""
"By default, most of DB actions for Tigase, are performed using stored "
"procedures including user authentication. So, the first thing to do is to"
" make sure the stored procedures are working correctly."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1510
msgid "Create a Test User Account"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1512
msgid ""
"To add a new user account we use a stored procedure: "
"``TigAddUserPlainPw(bareJid, password)``. As you can see there is this "
"strange appendix to the procedure name: ``PlainPw``. This procedure "
"accepts plain passwords regardless how it is stored in the database. So "
"it is safe and easy to use either for plain-text passwords or hashed in "
"the DB. There are also versions of procedures without this appendix but "
"they are sensitive on the data format and always have to pass password in"
" the exact format it is stored in the database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1514
msgid "So, let’s add a new user account:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1520
msgid ""
"If the result was 'Query OK', then it means the user account has been "
"successfully created."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1523
msgid "Test User Authentication"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1525
msgid "We can now test user authentication:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1531
msgid "If authentication was successful the result looks like this:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1544
msgid "If authentication was unsuccessful, the result looks like this:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1558
msgid "Password Encoding Check"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1560
msgid ""
"``TigGetDBProperty`` is a function, not a procedure in MySQL database so "
"we have to use select to call it:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1566
msgid "Most likely output is this:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1577
msgid ""
"Which means a default password encoding is used, in plain-text and thus "
"no encoding. And we can actually check this in the database directly:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1583
msgid "And expected result with plain-text password format would be:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1595
msgid "Password Encoding Change"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1597
msgid "Now let’s set password encoding to MD5 hash:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1603
msgid ""
"'Query OK', means the password encoding has been successfully changed. Of"
" course we changed the property only. All the existing passwords in the "
"database are still in plain-text format. Therefore we expect that attempt"
" to authenticate the user would fail:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1617
msgid "We can fix this by updating the user’s password in the database:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1635
msgid "Tigase Server and Multiple Databases"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1637
msgid ""
"Splitting user authentication data from all other XMPP information such "
"as roster, vcards, etc…​ was almost always possible in Tigase XMPP "
"Server. Possible and quite simple thing to configure. Also it has been "
"always possible and easy to assign a different database for each Tigase "
"component (MUC, PubSub, AMP), for recording the server statistics. Almost"
" every data type or component can store information in a different "
"location, simple and easy to setup through the configuration file."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1639
msgid ""
"However it is much less known that it is also possible to have a "
"different database for each virtual domain. This applies to both the user"
" repository and authentication repository. This allows for very "
"interesting configuration such as user database sharing where each shard "
"keeps users for a specific domain, or physically split data based on "
"virtual domain if each domain refers to a different customer or group of "
"people."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1641
msgid "How can we do that then?"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1643
msgid "This is very easy to do through the Tigase’s configuration file."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1665
msgid ""
"This configuration defines just a default databases for both user "
"repository and authentication repository. Default means it is used when "
"there is no repository specified for a particular virtual domain. "
"However, you can have a separate, both user and authentication repository"
" for each virtual domain."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1667
msgid "Here is, how it works:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1669
msgid "First, let’s define our default database for all VHosts"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1691
msgid ""
"Now, we have VHost: domain1.com User authentication data for this VHost "
"is stored in Drupal database"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1707
msgid "All other user data is stored in Tigase’s standard database in MySQL"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1720
msgid ""
"Next VHost: domain2.com User authentication is in LDAP server but all "
"other user data is stored in Tigase’s standard database"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1732
msgid ""
"Now is something new, we have a custom authentication repository and "
"separate user settings for a single domain. Please note how we define the"
" VHost for which we set custom parameters"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1742
msgid "All other user data is stored in the same as default repository"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1755
msgid "When combined, the DSL output should look like this:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1775
msgid ""
"Next VHost: domain3.com Again user authentication is in LDAP server but "
"pointing to a different LDAP server with different access credentials and"
" parameters. User information is stored in a postgreSQL database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1795
msgid ""
"For VHost: domain4.com all the data, both authentication and user XMPP "
"data are stored on a separate MySQL server with custom stored procedures "
"for both user login and user logout processing."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1816
msgid ""
"As you can see, it requires some writing but flexibility is very "
"extensive and you can setup as many separate databases as you need or "
"want. If one database (recognized by the database connection string) is "
"shared among different VHosts, Tigase still uses a single connection "
"pool, so it won’t create an excessive number of connections to the "
"database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1819
msgid "Importing User Data"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1821
msgid ""
"You can easily copy data between Tigase compatible repositories that is "
"repositories for which there is a database connector. However, it is not "
"that easy to import data from an external source. Therefore a simple data"
" import functionality has been added to repository utilities package."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1823
msgid ""
"You can access repository utilities through command ``./bin/repo.sh`` or "
"``./scripts/repo.sh`` depending on whether you use a binary package or "
"source distribution."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1825
msgid "``-h`` parameter gives you a list of all possible parameters:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1863
msgid ""
"The most critical parameters are the source repository class name and the"
" initialization string. Therefore there are a few example preset "
"parameters which you can use and adjust for your system. If you look "
"inside the ``repo.sh`` script you can find at the end of the script "
"following lines:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1873
msgid ""
"You can see that the source repository has been set to MySQL database "
"with ``tigase`` as the database name, ``root`` the database user and "
"``mypass`` the user password."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1875
msgid "You can adjust these settings for your system."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1877
msgid "Now to import data to your repository simply execute the command:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1883
msgid "*Note, the import function is available from* **b895**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1885
msgid ""
"The format of the import file is very simple. This is a flat file with "
"comma separated values:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1891
msgid ""
"To create such a file from MySQL database you will have to execute a "
"command like this one:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1901
msgid "Importing Existing Data"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1903
msgid "Information about importing user data from other databases."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1906
msgid "Connecting the Tigase Server to MySQL Database"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1908
msgid ""
"Please before continuing reading of this manual have a look at the "
"`initial MySQL database setup <#prepareMysql>`__. It will help you with "
"database preparation for connecting with Tigase server."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1910
msgid "This guide describes MySQL database connection parameters."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1912
msgid ""
"This guide is actually very short as there are example configuration "
"files which can be used and customized for your environment."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1928
msgid ""
"This is the basic setup for setting up an SQL repository for Tigase. "
"dataSource contains the uri for ``default`` which is the mysql database. "
"MySQL connector requires connection string in the following format: "
"``jdbc:mysql://[hostname]/[database name]?user=[user name]&password=[user"
" password]``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1930
msgid "Edit the ``config.tdsl`` file for your environment."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1932
msgid "Start the server using following command:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1939
msgid "Integrating Tigase Server with Drupal"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1941
msgid ""
"First of all, Tigase can authenticate users against a Drupal database "
"which means you have the same user account for both Drupal website and "
"the XMPP server. Moreover in such a configuration all account management "
"is done via Drupal web interface like account creation, password change "
"update user details and so on. Administrator can temporarily disable user"
" account and this is followed by Tigase server too."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1944
msgid "Connecting to Drupal Database"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1946
msgid ""
"The best way to setup Tigase with Drupal database is via the "
"``config.tdsl`` file where you can put initial setting for Tigase "
"configuration."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1948
msgid ""
"If you look in ``etc/`` directory of your Tigase installation you should "
"find a the file there."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1950
msgid "All you need to connect to Drupal database is set the following:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1966
msgid ""
"Typically, you will need to have drupal for authentication, and another "
"for user repository. In this case, we will use SQL for user DB."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1988
msgid ""
"In theory you can load Tigase database schema to Drupal database and then"
" both ``db-uris`` would have the same database connection string. More "
"details about setting up and connecting to MySQL database can be found in"
" the `MySQL guide <#prepareMysql>`__."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1990
msgid "Now run the Tigase server."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:1996
msgid ""
"Now you can register an account on your Drupal website and connect with "
"an XMPP client using the account details."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2000
msgid ""
"You have to enable plain password authentication in your XMPP client to "
"connect to Tigase server with Drupal database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2003
msgid "PostgreSQL Database Use"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2005
msgid ""
"This guide describes how to configure Tigase server to use `PostgreSQL "
"<http://www.postgresql.org/>`__ database as a user repository."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2007
msgid ""
"If you used an XML based user repository before you can copy all user "
"data to PostgreSQL database using repository management tool. All steps "
"are described below."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2010
msgid "PostgreSQL Database Preparation"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2012
msgid ""
"Create new database user account which will be used to connect to your "
"database:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2021
msgid "Now using new database user account create database for your service:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2028
msgid "Now you can load the database schema:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2034
msgid "Now the database is ready for Tigase server to use."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2037
msgid "Server Configuration"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2039
msgid ""
"Server configuration is almost identical to MySQL database setup. The "
"only difference is the connection string which usually looks like:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2050
msgid "Schema Updates"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2052
msgid ""
"This is a repository for Schema updates in case you have to upgrade from "
"older installations."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2054
msgid ""
"`Tigase Server Schema v7.1 Updates <#tigaseServer71>`__ Applies to v7.1.0"
" and v8.0.0"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2057
msgid "Changes to Schema in v8.0.0"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2059
msgid ""
"For version 8.0.0 of Tigase XMPP Server, we decided to improve "
"authentication and security that was provided. In order to do this, "
"implementation of repository and database schemas needed to be changed to"
" achieve this goal. This document, as well one in the HTTP API, will "
"describe the changes to the schemas in this new version."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2062
msgid "Reasons"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2064
msgid ""
"Before version 8.0.0, user passwords were stored in plaintext in "
"``user_pw`` database field within ``tig_users`` table, but in plaintext. "
"It was possible to enable storage of the MD5 hash of the password "
"instead, however this limited authentication mechanism SASL PLAIN only. "
"However an MD5 hash of a password is not really a secure method as it is "
"possible to revert this mechanism using rainbow tables."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2066
msgid ""
"Therefore, we decided to change this and store only encrypted versions of"
" a password in ``PBKDF2`` form which can be easily used for ``SCRAM-"
"SHA-1`` authentication mechanism or ``SCRAM-SHA-256``. SASL PLAIN "
"mechanism can also used these encrypted passwords. The storage of "
"encrypted passwords is now enabled **by default** in v8.0.0 of Tigase."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2069
msgid "Summary of changes"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2071
msgid "Added support for storage of encrypted password"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2073
msgid "Passwords are no longer stored in plaintext on any database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2075
msgid "Using same salt for any subsequent authentications"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2077
msgid ""
"This allows clients to reuse calculated credentials and keep them instead"
" of storing plaintext passwords."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2079
msgid "Disabled usage of stored procedure for authentication"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2081
msgid ""
"In previous versions, Tigase used stored procedures "
"``TigUserLoginPlainPw`` and ``TigUserLogin`` for SASL PLAIN "
"authentication. From version 8.0.0, those procedures are no longer used, "
"but they are updated to use passwords stored in ``tig_user_credentials`` "
"table."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2083
msgid ""
"It is still possible to use this procedures for authentication, but to do"
" that you need add:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2089
msgid "to configuration block of **every** authentication repository."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2091
msgid ""
"To enable this for default repository, the ``authRepository`` "
"configuration block will look like this:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2102
msgid "Deprecated API"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2104
msgid ""
"Some methods of ``AuthRepository`` API were deprecated and should not be "
"used. Most of them were used for authentication using stored procedures, "
"retrieval of password in plaintext or for password change."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2106
msgid ""
"For most of these methods, new versions based on ``tig_user_credentials``"
" table and user credentials storage are provided where possible."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2108
msgid "Deprecated storage procedures"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2110
msgid ""
"Stored procedures for authentication and password manipulation were "
"updated to a new form, so that will be possible to use them by older "
"versions of Tigase XMPP Server during rolling updates of a cluster. "
"However, these procedures will not be used any more and will be "
"depreciated and removed in future versions of Tigase XMPP Server."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2112
msgid "Usage of MD5 hashes of passwords"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2114
msgid ""
"If you have changed ``password-encoding`` database property in previous "
"versions of Tigase XMPP Server, then you will need to modify your "
"configuration to keep it working. If you wish only to allow access using "
"old passwords and to store changed passwords in the new form, then you "
"need to enable credentials decoder for the correct authentication "
"repository. In this example we will provided changes required for "
"``MD5-PASSWORD`` value of ``password-encoding`` database property. If you"
" have used a different one, then just replace ``MD5-PASSWORD`` with ``MD5"
"-USERNAME-PASSWORD`` or ``MD5-USERID-PASSWORD``."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2116
msgid "**Usage of MD5 decoder.**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2128
msgid ""
"If you wish to store passwords in MD5 form then use following entries in "
"your configuration file:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2130
msgid "**Usage of MD5 encoder.**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2143
msgid "Enabling and disabling credentials encoders/decoders"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2145
msgid ""
"You may enable which encoders and decoders used on your installation. By "
"enabling encoders/decoders you are deciding in what form the password is "
"stored in the database. Those changes may impact which SASL mechanisms "
"may be allowed to use on your installation."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2147
msgid "**Enabling PLAIN decoder.**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2159
msgid "**Disabling SCRAM-SHA-1 encoder.**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2174
msgid ""
"It is strongly recommended not to disable encoders if you have enabled "
"decoder of the same type as it may lead to the authentication issues, if "
"client tries to use a mechanism which that is not available."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2176
msgid "Schema changes"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2178
msgid ""
"This change resulted in a creation of the new table "
"``tig_user_credentials`` with following fields:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2181
msgid "**uid**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2181
msgid "id of a user row in ``tig_users``."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2184
msgid "**username**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2184
msgid ""
"username used for authentication (if ``authzid`` is not provided or "
"``authzid`` localpart is equal to ``authcid`` then row with ``default`` "
"value will be used)."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2187
msgid "**mechanism**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2187
msgid ""
"name of mechanism for which this credentials will be used, ie. ``SCRAM-"
"SHA-1`` or ``PLAIN``."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2190
msgid "**value**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2190
msgid "serialized value required for mechanism to confirm that credentials match."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2194
msgid ""
"During execution of ``upgrade-schema`` task, passwords will be removed "
"from ``tig_users`` table from ``user_pw`` field and moved to "
"``tig_user_credentials`` table."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2196
msgid "Added password reset mechanism"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2198
msgid ""
"As a part of Tigase HTTP API component and Tigase Extras, we developed a "
"mechanism which allows user to reset their password. To use this "
"mechanism HTTP API component and its REST module **must** to be enabled "
"on Tigase XMPP Server installation."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2202
msgid ""
"Additionally this mechanism need to be enabled in the configuration file."
" For more information about configuration of this mechanism please check "
"Tigase HTTP API component documentation."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2204
msgid ""
"Assuming that HTTP API component is configured to run on port 8080 "
"*(default)*, then after accessing address "
"http://localhost:8080/rest/user/resetPassword in the web browser it will "
"present a web form. By filling and submitting this form, the user will "
"initiate a password reset process. During this process, Tigase XMPP "
"Server will send an email to the user’s email address (provided during "
"registration) with a link to the password change form."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2207
msgid "Upgrading from v7.1.x"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2209
msgid ""
"When upgrading from previous versions of Tigase, it is recommended that "
"you first backup the database. Refer to the documentation of your "
"database software to find out how to export a copy. Once the backup is "
"made, it will be time to run the schema upgrade. Be sure that your schema"
" is up to date, and should be v7.1.0 Schema."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2211
msgid "To upgrade, use the new ``upgrade-schema`` task of SchemaManager:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2213
msgid "In linux"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2219
msgid "In Windows"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2225
msgid "You will need to configure the following switches:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid "``-T`` Specifies Database Type"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid ""
"Possible values are: ``mysql``, ``derby``, ``sqlserver``, ``postgresql``,"
" ``mongodb``"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid "``-D`` Specifies Databse Name"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid "The explicit name of the database you wish to upgrade."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid "``-H`` Specifies Host address"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid ""
"By default, this is localhost, but may be set to IP address or FQDNS "
"address."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid "``-U`` Specifies Username"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid ""
"This is the username that is authorized to make changes to the database "
"defined in -D."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid "``-P`` Specifies Password"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid "The password for username specified in -U."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2242
msgid "``-R`` Password for Administrator or Root DB account."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2244
msgid "``-A`` Password for Administrator or Root DB account."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2246
msgid "``-J`` Jid of user authorized as admin user from Tigase."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2248
msgid "``-N`` Password for user specified in -J."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid "``-F`` Points to the file that will perform the upgrade."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst
msgid "Will follow this form database/{dbname}-server-schema-8.0.0.sql"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2254
msgid "Tigase Server Schema v7.2 Updates"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2257
msgid "**FOR ALL USERS UPGRADING TO v8.0.0 FROM A v7.0.2 INSTALLATION**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2259
msgid ""
"The schema has changed for the main database, and the pubsub repository. "
"In order to upgrade to the new schemas, you will need to do the "
"following:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2261
msgid ""
"Upgrade the Main database schema to v7.1 using the ``database/${DB_TYPE"
"}-schema-upgrade-to-7-1.sql`` file"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2263
msgid ""
"Upgrade the Pubsub Schema to v3.1.0 using the ``database/${DB_TYPE"
"}-pubsub-schema-3.1.0.sql`` file"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2265
msgid ""
"Upgrade the Pubsub Schema to v3.2.0 using the ``database/${DB_TYPE"
"}-pubsub-schema-3.2.0.sql`` file"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2267
msgid ""
"Upgrade the Pubsub Schema to v3.3.0 using the ``database/${DB_TYPE"
"}-pubsub-schema-3.3.0.sql`` file"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2269
msgid ""
"All three commands may be done at the same time in that order, it is "
"suggested you make a backup of your current database to prevent data "
"loss."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2272
msgid "Tigase Schema Change for v7.1"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2274
msgid ""
"Tigase has made changes to its database to include primary keys in the "
"tig_pairs table to improve performance of the Tigase server. This is an "
"auto-incremented column for Primary Key items appended to the previous "
"schema."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2278
msgid ""
"You MUST update your database to be compliant with the new schema. If you"
" do not, Tigase will not function properly.**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2282
msgid "*This change will affect all users of Tigase using v7.1.0 and newer.*"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2284
msgid ""
"If you are installing a new version of v8.0.0 on a new database, the "
"schema should automatically be installed."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2286
msgid ""
"First, shut down any running instances of Tigase to prevent conflicts "
"with database editing. Then from command line use the DBSchemaLoader "
"class to run the -schema-upgrade-to-7.1.sql file to the database. The "
"command is as follows:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2288
msgid "In a linux environment"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2294
msgid "In a windows environment"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2300
msgid "All variables will be required, they are as follows:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2302
msgid "``${HOSTNAME}`` - Hostname of the database you wish to upgrade."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2304
msgid "``${DB_TYPE}`` - Type of database [derby, mysql, postgresql, sqlserver]."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2306
msgid "``${ROOT_USER}`` - Username of root user."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2308
msgid "``${ROOT_USER_PASS}`` - Password of specified root user."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2310
msgid "``${DB_USER}`` - Login of user that can edit database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2312
msgid "``${DB_USER_PASS}`` - Password of the specified user."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2314
msgid "``${DB_NAME}`` - Name of the database to be edited."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2316
msgid "``${DB_VERSION}`` - In this case, we want this to be 7.1."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2318
msgid ""
"``${ADMIN_JID}`` - Bare JID of a database user with admin privileges. "
"Must be contained within quotation marks."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2320
msgid "``${ADMIN_JID_PASS}`` - Password of associated admin JID."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2322
msgid ""
"Please note that the SQL file for the update will have an associated "
"database with the filename. i.e. postgresql-update-to-7.1.sql for "
"postgresql database."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2324
msgid "A finalized command will look something like this:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2330
msgid ""
"Once this has successfully executed, you may restart you server. Watch "
"logs for any db errors that may indicate an incomplete schema upgrade."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2333
msgid "Changes to Pubsub Schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2335
msgid ""
"Tigase has had a change to the PubSub Schema, to upgrade to PubSub Schema"
" v7.1 without having to reform your databases, use this guide to update "
"your databases to be compatible with the new version of Tigase."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2339
msgid ""
"Current PubSub Schema is v3.3.0, you will need to repeat these "
"instructions for v3.1.0, v3.2.0 and then v3.3.0 before you run Tigase "
"V7.1.0."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2341
msgid ""
"The PubSub Schema has been streamlined for better resource use, this "
"change affects all users of Tigase. To prepare your database for the new "
"schema, first be sure to create a backup! Then apply the appropriate "
"PubSub schema to your MySQL and it will add the new storage procedure."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2343
msgid ""
"All these files should be in your /database folder within Tigase, however"
" if you are missing the appropriate files, use the links below and place "
"them into that folder."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2345
msgid ""
"The MySQL schema can be found `Here <https://github.com/tigase/tigase-"
"pubsub/blob/master/src/main/database/mysql-pubsub-4.1.0.sql>`__."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2347
msgid ""
"The Derby schema can be found `Here <https://github.com/tigase/tigase-"
"pubsub/blob/master/src/main/database/derby-pubsub-4.1.0.sql>`__."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2349
msgid ""
"The PostGRESQL schema can be found `Here <https://github.com/tigase"
"/tigase-pubsub/blob/master/src/main/database/postgresql-"
"pubsub-4.1.0.sql>`__."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2351
msgid ""
"The same files are also included in all distributions of v8.0.0 in "
"[tigaseroot]/database/ . All changes to database schema are meant to be "
"backward compatible."
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2353
msgid ""
"You can use a utility in Tigase to update the schema using the following "
"command from the Tigase root:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2355
msgid "Linux"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2361
msgid "Windows:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2369
msgid ""
"**Some variation may be necessary depending on how your java build uses "
"``-cp`` option**"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2371
msgid "Use the following options to customize. Options in bold are required.:"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2373
msgid ""
"``-dbType`` database_type {derby, mysql, postgresql, sqlserver} "
"(*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2375
msgid "``-schemaVersion`` schema version {4, 5, 5-1}"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2377
msgid "``-dbName`` database name (*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2379
msgid "``-dbHostname`` database hostname (default is localhost)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2381
msgid "``-dbUser`` tigase username"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2383
msgid "``-dbPass`` tigase user password"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2385
msgid "``-rootUser`` database root username (*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2387
msgid "``-rootPass`` database root password (*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2389
msgid "``-file path`` to sql schema file (*required*)"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2391
msgid "``-query`` sql query to execute"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2393
msgid "``-logLevel`` java logger Level"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2395
msgid "``-adminJID`` comma separated list of admin JIDs"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2397
msgid "``-adminJIDpass`` password (one for all entered JIDs"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2401
msgid "Arguments take following precedent: query, file, whole schema"
msgstr ""

#: ../../Tigase_Admistration/Database_Management.rst:2403
msgid "As a result your final command should look something like this:"
msgstr ""

